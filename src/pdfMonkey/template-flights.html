<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flight & Hotel Information</title>
</head>

<body>
  {% for flight in selected_flights %}
  <div class="page">
    <main class="content">
      <div class="flight-card">
        <div class="flight-header">
          <div class="airline-info">
            <div class="airline-logo">{{ flight.airline.code }}</div>
            <div class="airline-name">
              <div class="airline-name">{{ flight.airline.name }}</div>
              <div class="detail-row">
                <span class="detail-label">Ocupación:</span>
                <span class="detail-value">{{ flight.adults }} adultos {{ flight.childrens }} niños</span>
              </div>
            </div>
          </div>
          <div class="total-price">
            <div class="price-amount">{{ flight.price.amount }} {{ flight.price.currency }}</div>
            <div class="price-currency">Precio total</div>
          </div>
        </div>

        <!-- Flight Legs -->
        {% for leg in flight.legs %}
        <div class="flight-leg">
          <div class="leg-header">
            <div class="leg-title">
              {% if leg.flight_type == 'outbound' %}
              Vuelo de ida <span class="flight-type">{{ flight.departure_date }}</span>
              {% elsif leg.flight_type == 'return' %}
              Vuelo de regreso <span class="flight-type">{{ flight.return_date }}</span>
              {% else %}
              Vuelo <span class="flight-type">{{ flight.departure_date }}</span>
              {% endif %}
            </div>
            <div class="leg-header">
              {% if flight.luggage %}
              <div class="flight-type">Equipaje de bodega incluido</div>
              {% else %}
              <div class="flight-type">Carry On incluido</div>
              {% endif %}
              <div class="flight-type">{{ leg.flight_type }}</div>
            </div>
          </div>
          <div class="flight-route">
            <div class="airport-info">
              <div class="airport-code">{{ leg.departure.city_code }}</div>
              <div class="airport-name">{{ leg.departure.city_name }}</div>
              <div class="time">{{ leg.departure.time }}</div>
            </div>
            <div class="flight-arrow">
              <div class="arrow-line">
                <div class="arrow-head"></div>
                <div class="duration-info">{{ leg.duration }}</div>
              </div>
            </div>
            <div class="airport-info">
              <div class="airport-code">{{ leg.arrival.city_code }}</div>
              <div class="airport-name">{{ leg.arrival.city_name }}</div>
              <div class="time">{{ leg.arrival.time }}</div>
            </div>
          </div>

          {% if leg.layovers and leg.layovers.size > 0 %}
          <div class="layover-info">
            {% for layover in leg.layovers %}
            <div class="layover-title">Escala en {{ layover.destination_city }}</div>
            <div class="layover-details">
              Tiempo de espera: {{ layover.waiting_time }} en {{ layover.destination_code }} ({{
              layover.destination_city }})
            </div>
            {% endfor %}
          </div>
          {% endif %}
        </div>
        {% endfor %}


        {% assign travel_assistance_amount = flight.travel_assistance | default: 0 | plus: 0 %}
        {% if travel_assistance_amount > 0 %}
        <div class="travel-assistance">
          tarjeta de asistencia médica, por pasajero (opcional):
          <span class="highlight">USD {{ travel_assistance_amount }}</span>
        </div>
        {% endif %}

        {% assign transfers_amount = flight.transfers | default: 0 | plus: 0 %}
        {% if transfers_amount > 0 %}
        <div class="travel-assistance">
          traslados, por pasajero (opcional):
          <span class="highlight">USD {{ transfers_amount }}</span>
        </div>
        {% endif %}
      </div>
    </main>
  </div>
  {% endfor %}
</body>

</html>